# 2 Methods for trapping pre master key/secret

## 1 Chrome or Firefox

* Set in command line the env variable called SSLKEYLOGFILE=/path/to/some/file
* Then start chrome or firefox from this command line so they get the env variable
* navigate to an https site and this file will get populated
* point wireshark to this file to decrypt ssl/tls traffic

## 2 Curl

To be able to supply the RSA Session Keys that were used by the client in order to make the connection with Google. This is what we concentrate on here.

The method you use to get the RSA Session keys will depend on your client technology. Curl may not be able to print the right levels of debug in order to show it, or at least my skills in curl are inadequate. However, we can achieve the same with openssl s_client -connect:

        GOOGLE=74.125.132.99
        
        openssl s_client -ign_eof -connect ${GOOGLE}:443 < \
          <( echo -e "GET / HTTP/1.1\nHost: www.google.com\nConnection: close\n\n" ) \  
          | grep 'Session-ID:\|Master-Key:'
          
responds with:

        RSA Session-ID:CFE6D067323630666E1EB0E08B7728E3331F329AD04784BAEF42231A192F831B Master-
        Key:A654CC38F559D4E05EFF8D310A54C4CDBB5BB8BA59AEA76689212D060FFD0A1F4DD0A8B2FB9887EF3589BA5EF574716E
        
Note! Be very careful about the formatting of the above. EXACTLY as described with no spaces between Session-ID and the hex, or Master-Key and the hex. Despite what you read on the web, you do not need a newline at the end.

