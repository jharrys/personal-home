Many command line utilities request input from the user. For example the command “mvn versions:set” may ask for input from the user about which version the pom should be incremented to.

These input prompts don’t occur on the normal input stream of the shell. It usually happens directly to the /dev/tty (the tty of the controlling process).

When you use groovy/java to run shell command, capturing the output from the shell command will not show the input prompt. You must capture the shell’s tty from the shells input (groovy/java’s output).

In groovy this is attained simply by modifying the shell command:

        command = ['bash', '-c', 'mvn versions:set </dev/tty >/dev/tty']
        
        def process = new ProcessBuilder(command).directory(new File(System.properties.'user.dir')).redirectErrorStream(true).start()
        
        process.waitFor()

**note** that in the shell command we’ve redirected standard input to be /dev/tty and standard output to be /dev/tty. When java/groovy starts the shell command the standard input and standard output will be display /dev/tty. The input prompt should now appear.

**java**

        import java.io.OutputStream;
        
        public class Test {
            public static void main(String[] args) throws Exception {
                Process p = Runtime.getRuntime().exec(new String[] {"sh", "-c",
                        "less >/dev/tty"});
                OutputStream out = p.getOutputStream();
                out.write("Lengthy message".getBytes());
                out.close();
                System.out.println("=> "+p.waitFor());
            }
        }

**note** here we use the less shell command and only redirect shell’s output to the tty. We do NOT feed it a file because we are getting the processes Outputstream (which is the shell’s input stream), and outputting “Lengthy message” as input to the less command. So “less” should print “Lengthy message”.
