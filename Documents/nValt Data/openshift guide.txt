# Openshift Layout
## with node.js, mongodb and rockmongo cartridges

#### see the [openshift guide](https://developers.openshift.com/managing-your-applications/filesystem.html)

/app-deployments __[currently deployed items]__    
|    
/app-root    
|    
--/build-dependencies   
--/data __[contains .bash_profile, .bash_history, .vimrc, etc]__   
--/logs    
--/repo __[contains the source code from the git repo]__    
--/runtime __[contains the runtime state]__    
/git    
|    
--/somerepo.git    
/mongodb __[cartridge]__   
|    
/nodejs __[cartridge]__   
|    
/.npm    
|    
/.openshift_ssh    
|    
/.pki    
|    
/rockmongo __[cartridge]__    
|    
/.sandbox    
|     
/.ssh    
|    
/.tmp    
|    
/.vimrc    

------

## Updating your bash environment

1. update ~/app-root/data/.bash_profile with scripts
1. update with aliases
1. test carefully - this could hose your environment

## Change environment variables

1. use the **rhc** client

## Configure and show deployments
1. cd app (local box) ... cd booknook
2. rhc app-configure --keep-deployments 10
3. rhc deployment-list

## Deploying using git
1. cd app (local box) ... cd booknook
2. ... edit files ...
3. git add .
4. git commit -am "Commit comment"
5. git push
6. you should see log output "remote: Building....."

## Rollback a deployment
1. Assuming you have configured Openshift to keep deployments (by default it does not)
2. cd app (local box) ... cd booknook
3. rhc deployment-list
    9:35 PM, deployment abc12345
    9:44 PM, deployment 2eb3b3e8
5. rhc deployment-activate abc12345

## Set an environment variable
1. rhc set-env -a app-name -e NODE_ENV=development
